<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>采集和控制</title>
    <script>
        function fun(obj) {
            //var v1 = document.getElementsByName("username");
            // v[0].value = "hello";
            var xhr = new XMLHttpRequest();//创建对象

            var url = "";

            xhr.open("post", url, true);
            //事件
            xhr.onreadystatechange = function () {
                //判断协议版本是不是4,并且状态码是200
                if (xhr.readyState === 4 && xhr.status === 200)//请求完成且成功
                {
                    //v1[0].value = xhr.responseText;//响应正文(!!!)
                    console.log(xhr.responseText);
                }
            }
            if (obj == "ledon") {
                console.log("ledon");
                xhr.send("\"led=1\""); //发送请求
            }
            else if (obj == "ledoff") {
                console.log("ledoff");
                xhr.send("\"led=0\"");
            }
            else if (obj == "buzzeron") {
                console.log("buzzeron");
                xhr.send("\"beep=1\"");
            }
            else if (obj == "buzzeroff") {
                console.log("buzzeroff");
                xhr.send("\"beep=0\"");
            }
        }
        function get_info() {
            var v2 = document.getElementsByName("username"); //获取name为username的标签
            var xhr = new XMLHttpRequest();//创建对象
            var url = "";
            xhr.open("post", url, true);
            //事件
            xhr.onreadystatechange = function () {
                //判断是不是4,并且状态码是200
                if (xhr.readyState === 4 && xhr.status === 200)//请求完成且成功
                {
                    v2[0].value = xhr.responseText;//响应正文
                    console.log(xhr.responseText);
                }
            }
            xhr.send("\"modbus_get\""); //发送请求
        }
    </script>
</head>

<body>

    <!-- <body background="123.jpg" style="background-repeat:no-repeat
        background-attachment:fixed;
        background-size:100% 180%;"> -->
    <h1 style="text-align:center">基于WebServer的工业数据采集与控制系统</h1>
    <!--input标签-->
    <br><br><br>
    <h2 style="text-align:center">

        <body style="background-color: blanchedalmond">
            传感器数据：
            <input type="text" name="username" value="admin">
            点击刷新：<input type="button" name="flash" onclick="get_info()">
            <br>
            <!--input类型为radio表示单选框，表示同一类型的单选框name必须相同-->
            <!--checked表示默认选中-->
            LED：
            开
            <input type="radio" name="led" id="ledon" onclick="fun(id)">
            关
            <input type="radio" name="led" id="ledoff" checked="checked" onclick="fun(id)">
            <br>
            蜂鸣器：
            开
            <input type="radio" name="buzzer" id="buzzeron" onclick="fun(id)">
            关
            <input type="radio" name="buzzer" id="buzzeroff" checked="checked" onclick="fun(id)">
        </body>
    </h2>
</body>

</html>